"use strict";(self["webpackChunkweb"]=self["webpackChunkweb"]||[]).push([[437],{4765:function(t,s,n){n.r(s),n.d(s,{default:function(){return Z}});var e=function(){var t=this,s=t._self._c;return s("div",{staticClass:"container"},[s("div",{staticClass:"player"},[s("div",{staticClass:"player__info"},[t._v(t._s(t.currentWord.en))]),s("div",{staticClass:"player__btns"},[s("span",{staticClass:"random-btn",on:{click:function(s){return t.setSort()}}},[t._v(t._s(t.isDes?"正序":"乱序"))]),s("div",{staticClass:"player__icon icon-random"}),s("div",{staticClass:"player__btn",on:{click:function(s){return t.setCurrent(t.current-1)}}},[s("van-icon",{attrs:{name:"arrow-left"}})],1),s("div",{staticClass:"player__btn",on:{click:t.onAutoPlay}},[s("van-icon",{attrs:{name:t.playing?"pause":"play"}})],1),s("div",{staticClass:"player__btn",on:{click:function(s){return t.setCurrent(t.current+1)}}},[s("van-icon",{attrs:{name:"arrow"}})],1),s("div",{staticClass:"player__btn-list",on:{click:function(s){t.showList=!0}}},[s("van-icon",{attrs:{name:"bars"}})],1)])]),s("van-action-sheet",{attrs:{title:"已读"},model:{value:t.showList,callback:function(s){t.showList=s},expression:"showList"}},[s("ul",t._l(t.words,(function(n,e){return s("li",{key:n.en,class:{played:n.played},on:{click:function(s){return t.setCurrent(e)}}},[t._v(" "+t._s(n.en)+" ")])})),0)]),s("audio",{ref:"audio",attrs:{src:t.audioSrc}}),s("div",{staticClass:"icon-setting",on:{click:t.onShow}},[s("van-icon",{attrs:{name:"setting"}})],1),s("van-action-sheet",{attrs:{title:"设置"},model:{value:t.show,callback:function(s){t.show=s},expression:"show"}},[s("div",{staticClass:"action-content"},[s("van-form",[s("van-field",{attrs:{label:"章节"},scopedSlots:t._u([{key:"input",fn:function(){return[s("van-checkbox-group",{attrs:{direction:"horizontal"},model:{value:t.setting.days,callback:function(s){t.$set(t.setting,"days",s)},expression:"setting.days"}},t._l(21,(function(n){return s("van-checkbox",{key:n,attrs:{name:n,shape:"square"}},[t._v(t._s(n))])})),1)]},proxy:!0}])}),s("van-field",{attrs:{label:"间隔"},scopedSlots:t._u([{key:"input",fn:function(){return[s("van-radio-group",{attrs:{direction:"horizontal"},model:{value:t.setting.time,callback:function(s){t.$set(t.setting,"time",s)},expression:"setting.time"}},[s("van-radio",{attrs:{name:1e3}},[t._v("1秒")]),s("van-radio",{attrs:{name:2e3}},[t._v("2秒")]),s("van-radio",{attrs:{name:3e3}},[t._v("3秒")])],1)]},proxy:!0}])})],1),s("van-button",{attrs:{type:"info",block:""},on:{click:t.onSubmit}},[t._v("确认")])],1)])],1)},i=[],a=(n(1958),n(6786)),r=n(5065),o=n(2115),c=(0,a.d)("radio-group"),u=c[0],l=c[1],d=u({mixins:[(0,o.G)("vanRadio"),r.f],props:{value:null,disabled:Boolean,direction:String,checkedColor:String,iconSize:[Number,String]},watch:{value:function(t){this.$emit("change",t)}},render:function(){var t=arguments[0];return t("div",{class:l([this.direction]),attrs:{role:"radiogroup"}},[this.slots()])}}),h=(n(3332),n(6742),n(5423)),p=(0,a.d)("radio"),m=p[0],v=p[1],y=m({mixins:[(0,h.p)({bem:v,role:"radio",parent:"vanRadio"})],computed:{currentValue:{get:function(){return this.parent?this.parent.value:this.value},set:function(t){(this.parent||this).$emit("input",t)}},checked:function(){return this.currentValue===this.name}},methods:{toggle:function(){this.currentValue=this.name}}}),f=(n(3446),n(4861)),g=(n(323),n(1698)),_=(n(7322),n(6631)),w=(n(42),n(5944)),b=(n(5825),n(284)),k={components:{[b.Z.name]:b.Z,[w.Z.name]:w.Z,[_.Z.name]:_.Z,[g.Z.name]:g.Z,[f.Z.name]:f.Z,[y.name]:y,[d.name]:d},data(){return{show:!1,showList:!1,playing:!1,days:[21],time:1e3,words:[],current:0,isDes:!0,setting:{day:[],time:1e3}}},computed:{audio(){return this.$refs.audio},currentWord(){return this.words[this.current]||{}},audioSrc(){return`https://dict.youdao.com/dictvoice?audio=${this.currentWord?.en}&type=1`}},created(){this.getWords()},mounted(){this.audio.addEventListener("ended",(()=>{if(this.$set(this.words[this.current],"played",!0),this.isDes)this.words.length!==this.current+1?this.setCurrent(this.current+1):this.playing=!1;else{const{index:t,isFinish:s}=this.getRandomWord();s?this.playing=!1:this.setCurrent(t)}}),!1)},beforeDestroy(){},methods:{getRandom(t,s){return Math.floor(Math.random()*(s-t+1))+t},getRandomWord(){const t=[];return this.words.forEach(((s,n)=>{s.played||t.push({...s,index:n})})),{index:t[this.getRandom(0,t.length-1)]?.index,isFinish:this.words.length&&0===t.length}},setSort(){this.isDes=!this.isDes},setCurrent(t){this.current=t,setTimeout((()=>{this.onPlay(this.words[this.current].en)}),this.time)},onShow(){this.show=!0,this.$set(this.setting,"days",this.days)},onAutoPlay(){this.playing?this.onPause():this.onPlay(this.words[this.current].en)},onPause(){this.audio.pause(),this.audio=null,this.playing=!1},onPlay(){this.playing=!0,this.$refs.audio.play()},getWords(){const t=[];this.words=[],this.days.forEach((s=>{const e=n(49)(`./${s}.json`);t.push(...e)})),this.words=t},onSubmit(){this.show=!1,this.current=0,this.days=this.setting.days,this.time=this.setting.time,this.getWords()}}},C=k,x=n(3736),S=(0,x.Z)(C,e,i,!1,null,"ceef665e",null),Z=S.exports}}]);
//# sourceMappingURL=437.b9c39473.js.map