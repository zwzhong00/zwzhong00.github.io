"use strict";(self["webpackChunkweb"]=self["webpackChunkweb"]||[]).push([[276],{276:function(t,s,i){i.r(s),i.d(s,{default:function(){return Z}});var n=function(){var t=this,s=t._self._c;return s("div",{staticClass:"container"},[s("div",{staticClass:"player"},[s("div",{staticClass:"player__info"},[t._v(t._s(t.currentWord.en))]),s("div",{staticClass:"player__btns"},[s("span",{staticClass:"random-btn",on:{click:function(s){return t.setSort()}}},[t._v(t._s(t.isDes?"正序":"乱序"))]),s("div",{staticClass:"player__icon icon-random"}),s("div",{staticClass:"player__btn",on:{click:function(s){return t.setCurrent(t.current-1)}}},[s("van-icon",{attrs:{name:"arrow-left"}})],1),s("div",{staticClass:"player__btn",on:{click:t.onAutoPlay}},[s("van-icon",{attrs:{name:t.playing?"pause":"play"}})],1),s("div",{staticClass:"player__btn",on:{click:function(s){return t.setCurrent(t.current+1)}}},[s("van-icon",{attrs:{name:"arrow"}})],1),s("div",{staticClass:"player__btn-list",on:{click:function(s){t.showList=!0}}},[s("van-icon",{attrs:{name:"bars"}})],1)])]),s("van-action-sheet",{attrs:{title:"已读"},model:{value:t.showList,callback:function(s){t.showList=s},expression:"showList"}},[s("ul",t._l(t.words,(function(i,n){return s("li",{key:i.en,class:{played:i.played},on:{click:function(s){return t.setCurrent(n)}}},[t._v(" "+t._s(i.en)+" ")])})),0)]),s("div",{staticClass:"icon-setting",on:{click:t.onShow}},[s("van-icon",{attrs:{name:"setting"}})],1),s("van-action-sheet",{attrs:{title:"设置"},model:{value:t.show,callback:function(s){t.show=s},expression:"show"}},[s("div",{staticClass:"action-content"},[s("van-form",[s("van-field",{attrs:{label:"章节"},scopedSlots:t._u([{key:"input",fn:function(){return[s("van-checkbox-group",{attrs:{direction:"horizontal"},model:{value:t.setting.days,callback:function(s){t.$set(t.setting,"days",s)},expression:"setting.days"}},t._l(21,(function(i){return s("van-checkbox",{key:i,attrs:{name:i,shape:"square"}},[t._v(t._s(i))])})),1)]},proxy:!0}])}),s("van-field",{attrs:{label:"间隔"},scopedSlots:t._u([{key:"input",fn:function(){return[s("van-radio-group",{attrs:{direction:"horizontal"},model:{value:t.setting.time,callback:function(s){t.$set(t.setting,"time",s)},expression:"setting.time"}},[s("van-radio",{attrs:{name:1e3}},[t._v("1秒")]),s("van-radio",{attrs:{name:2e3}},[t._v("2秒")]),s("van-radio",{attrs:{name:3e3}},[t._v("3秒")])],1)]},proxy:!0}])})],1),s("van-button",{attrs:{type:"info",block:""},on:{click:t.onSubmit}},[t._v("确认")])],1)])],1)},e=[],a=(i(7658),i(284)),o=i(5944),r=i(6631),c=i(1698),u=i(4861),l=i(6786),d=i(5423),h=(0,l.d)("radio"),p=h[0],m=h[1],v=p({mixins:[(0,d.p)({bem:m,role:"radio",parent:"vanRadio"})],computed:{currentValue:{get:function(){return this.parent?this.parent.value:this.value},set:function(t){(this.parent||this).$emit("input",t)}},checked:function(){return this.currentValue===this.name}},methods:{toggle:function(){this.currentValue=this.name}}}),y=i(5065),f=i(2115),g=(0,l.d)("radio-group"),w=g[0],_=g[1],b=w({mixins:[(0,f.G)("vanRadio"),y.f],props:{value:null,disabled:Boolean,direction:String,checkedColor:String,iconSize:[Number,String]},watch:{value:function(t){this.$emit("change",t)}},render:function(){var t=arguments[0];return t("div",{class:_([this.direction]),attrs:{role:"radiogroup"}},[this.slots()])}}),k={components:{[a.Z.name]:a.Z,[o.Z.name]:o.Z,[r.Z.name]:r.Z,[c.Z.name]:c.Z,[u.Z.name]:u.Z,[v.name]:v,[b.name]:b},data(){return{show:!1,showList:!1,playing:!1,audio:null,days:[21],time:1e3,words:[],current:0,isDes:!0,setting:{day:[],time:1e3}}},computed:{currentWord(){return this.words[this.current]||{}}},created(){this.getWords()},beforeDestroy(){this.audio.pause()},methods:{getRandom(t,s){return Math.floor(Math.random()*(s-t+1))+t},getRandomWord(){const t=[];return this.words.forEach(((s,i)=>{s.played||t.push({...s,index:i})})),{index:t[this.getRandom(0,t.length-1)]?.index,isFinish:this.words.length&&0===t.length}},setSort(){this.isDes=!this.isDes},setCurrent(t){this.current=t,setTimeout((()=>{this.onPlay(this.words[this.current].en)}),this.time)},onShow(){this.show=!0,this.$set(this.setting,"days",this.days)},onAutoPlay(){this.playing?this.onPause():this.onPlay(this.words[this.current].en)},onPause(){this.audio.pause(),this.audio=null,this.playing=!1},onPlay(t){this.playing=!0,this.audio?this.audio.src=`https://dict.youdao.com/dictvoice?audio=${this.words[this.current].en}&type=1`:(this.audio=new Audio(`https://dict.youdao.com/dictvoice?audio=${t}&type=1`),this.audio.addEventListener("ended",(()=>{if(this.$set(this.words[this.current],"played",!0),this.isDes)this.words.length!==this.current+1?this.setCurrent(this.current+1):this.playing=!1;else{const{index:t,isFinish:s}=this.getRandomWord();s?this.playing=!1:this.setCurrent(t)}}),!1)),this.audio.play()},getWords(){const t=[];this.words=[],this.days.forEach((s=>{const n=i(5638)(`./${s}.json`);t.push(...n)})),this.words=t},onSubmit(){this.show=!1,this.current=0,this.days=this.setting.days,this.time=this.setting.time,this.getWords()}}},C=k,x=i(1001),S=(0,x.Z)(C,n,e,!1,null,"3113f0d4",null),Z=S.exports}}]);
//# sourceMappingURL=276.d5259c2a.js.map